import{r as P,bk as Fe,ay as ze,aw as He,w as xe,bl as We,bm as Ge,d as ae,bn as we,o as t,m as v,k as d,G as j,h as k,f as e,bo as se,t as E,p as U,v as H,a7 as Je,a8 as ee,F as N,n as A,a4 as ce,Y as Ke,a as V,i as m,j as x,W as $e,_ as fe,bp as Qe,aa as Ye,as as Xe,au as pe,a9 as Ze,ax as et,e as tt,a0 as Se,l as X,I as le,ar as ot,U as nt,A as Ve,bq as st,br as lt,af as at,S as rt,bs as it,am as ut}from"./entry.12ac938b.js";import{_ as dt}from"./NNavbar.vue.5fed0fd7.js";import{_ as Te}from"./NBadge.83bd8b90.js";import{_ as Re}from"./NSelect.vue.08628a3f.js";import{_ as pt}from"./NCheckbox.vue.5a0973a7.js";import{u as Ue,_ as ct}from"./storage-options.2141006e.js";import{_ as ft}from"./DataSchemaButton.vue.42a3718a.js";import{_ as mt}from"./NCodeBlock.vue.2de294a4.js";import{C as ke,S as Ne}from"./constants.2cc6e981.js";import{U as vt}from"./json-editor-vue.cf7b17c9.js";import{_ as ht}from"./NSectionBlock.d6290e19.js";import{_ as yt}from"./NDrawer.vue.9614b581.js";import"./client.f2b385ce.js";import"./NIconTitle.vue.eb974cf8.js";const ne=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function _t(u,y){if(typeof u!="string")throw new TypeError("argument str must be a string");const h={},$=(y||{}).decode||kt;let g=0;for(;g<u.length;){const c=u.indexOf("=",g);if(c===-1)break;let s=u.indexOf(";",g);if(s===-1)s=u.length;else if(s<c){g=u.lastIndexOf(";",c-1)+1;continue}const i=u.slice(g,c).trim();if(h[i]===void 0){let r=u.slice(c+1,s).trim();r.codePointAt(0)===34&&(r=r.slice(1,-1)),h[i]=bt(r,$)}g=s+1}return h}function Ce(u,y,h){const o=h||{},$=o.encode||Ct;if(typeof $!="function")throw new TypeError("option encode is invalid");if(!ne.test(u))throw new TypeError("argument name is invalid");const g=$(y);if(g&&!ne.test(g))throw new TypeError("argument val is invalid");let c=u+"="+g;if(o.maxAge!==void 0&&o.maxAge!==null){const s=o.maxAge-0;if(Number.isNaN(s)||!Number.isFinite(s))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(s)}if(o.domain){if(!ne.test(o.domain))throw new TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!ne.test(o.path))throw new TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){if(!gt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(c+="; HttpOnly"),o.secure&&(c+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return c}function gt(u){return Object.prototype.toString.call(u)==="[object Date]"||u instanceof Date}function bt(u,y){try{return y(u)}catch{return u}}function kt(u){return u.includes("%")?decodeURIComponent(u):u}function Ct(u){return encodeURIComponent(u)}const xt={path:"/",watch:!0,decode:u=>We(decodeURIComponent(u)),encode:u=>encodeURIComponent(typeof u=="string"?u:JSON.stringify(u))};function wt(u,y){const h={...xt,...y},o=$t(h)||{},$=P(o[u]??h.default?.());{const g=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${u}`);Fe()&&ze(()=>{g?.close()});const c=()=>{Vt(u,$.value,h),g?.postMessage(Ge($.value))};let s=!1;g&&(g.onmessage=i=>{s=!0,$.value=i.data,He(()=>{s=!1})}),h.watch?xe($,()=>{s||c()},{deep:h.watch!=="shallow"}):c()}return $}function $t(u={}){return _t(document.cookie,u)}function St(u,y,h={}){return y==null?Ce(u,y,{...h,maxAge:-1}):Ce(u,y,h)}function Vt(u,y,h={}){document.cookie=St(u,y,h)}const Tt=d("div",{"x-divider":""},null,-1),Ie=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(u){const y=P(!0),h=we();return(o,$)=>{const g=ce,c=Te,s=Ie;return t(),v("div",null,[d("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:j([{"bg-active":e(h)===o.item.filepath}]),style:Je({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:$[0]||($[0]=i=>{y.value=!e(y),h.value=o.item.filepath})},[d("div",{class:j({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(t(),k(g,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(y)?90:0,transition:""},null,8,["transform-rotate"])):(t(),k(c,{key:1,class:j(("getRequestMethodClass"in o?o.getRequestMethodClass:e(se))(o.item.method||"*")),textContent:E((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),d("span",{class:j({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(t(),k(g,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):U("",!0),H(" "+E(o.item.route),1)],2)],6),Tt,e(y)?ee(o.$slots,"default",{key:0},()=>[(t(!0),v(N,null,A(o.item.routes,i=>(t(),k(s,{key:i.filepath,item:i,index:o.index+1},null,8,["item","index"]))),128))]):U("",!0)])}}}),Rt={p4:"",flex:"~ col gap-4"},Ut={key:1,ml2:"",flex:""},Nt=["value"],It={key:0,flex:"","gap-4":""},Dt=d("div",{"flex-auto":""},null,-1),De=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(u,{emit:y}){const h=u,o=Ke(h,"modelValue",y,{passive:!0}),$=V(()=>[...h.keys,"active","key","value","type"]),g=V(()=>{const i={};for(const r of $.value)i[r]=h.default[r]||"";return i}),c=["string","number","boolean","file","date","time","datetime-local"];function s(i,r){const I=r.target;if(I.files&&I.files[0]){const M=I.files[0],z=new FileReader;z.readAsDataURL(M),z.onload=()=>{o.value[i].value=z.result}}}return xe(()=>o,i=>{i.value.forEach(r=>{if(r.type==="number"&&typeof r.value!="number"){const I=Number.parseFloat(r.value);r.value=Number.isNaN(I)?0:I}else r.type==="boolean"&&typeof r.value!="boolean"?r.value=!0:r.type==="file"&&typeof r.value!="object"?r.value="":r.type==="date"&&typeof r.value=="string"&&!r.value.match(/^\d{4}-\d{2}-\d{2}$/)?r.value=new Date().toISOString().slice(0,10):r.type==="time"&&typeof r.value=="string"&&!r.value.match(/^\d{2}:\d{2}$/)?r.value=new Date().toISOString().slice(11,16):r.type==="datetime-local"&&typeof r.value=="string"&&!r.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?r.value=new Date().toISOString().slice(0,16):r.type==="string"&&(r.value=r.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(i,r)=>{const I=pt,M=$e,z=Re,J=ce,C=fe;return t(),v("div",Rt,[(t(!0),v(N,null,A(e(o),(l,S)=>(t(),v("div",{key:S,flex:"~ gap-2","justify-around":""},[ee(i.$slots,"input",{item:l}),(t(!0),v(N,null,A(e($),b=>(t(),v(N,{key:b},[l.type!==null&&b==="active"?(t(),k(I,{key:0,modelValue:l[b],"onUpdate:modelValue":_=>l[b]=_,n:"sm primary",disabled:i.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):U("",!0),l.type!==null&&b==="key"?(t(),k(M,{key:1,modelValue:l[b],"onUpdate:modelValue":_=>l[b]=_,placeholder:b,"flex-1":"","font-mono":"",n:"sm primary",disabled:i.disabled,class:j(i.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):b==="value"?(t(),v(N,{key:2},[l.type==="file"?(t(),k(M,{key:0,type:"file",disabled:i.disabled,class:j(i.disabled?"op75":""),onChange:_=>s(S,_)},null,8,["disabled","class","onChange"])):l.type==="boolean"?(t(),v("div",Ut,[m(I,{modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,placeholder:"Value",n:"green lg",disabled:i.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(t(),k(M,{key:2,modelValue:l.value,"onUpdate:modelValue":_=>l.value=_,type:l.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:i.disabled,class:j(i.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):b==="type"?(t(),k(z,{key:3,modelValue:l.type,"onUpdate:modelValue":_=>l.type=_,n:"sm green",class:j(i.disabled?"op75":""),disabled:i.disabled},{default:x(()=>[(t(),v(N,null,A(c,_=>d("option",{key:_,value:_},E(_),9,Nt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):U("",!0)],64))),128)),ee(i.$slots,"input-actions",{},()=>[m(C,{n:"red",disabled:i.disabled,class:j(i.disabled?"op0!":""),onClick:b=>e(o).splice(S,1)},{default:x(()=>[m(J,{icon:"carbon:trash-can"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),i.disabled?U("",!0):(t(),v("div",It,[ee(i.$slots,"actions",{params:e(o)},()=>[m(C,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:r[0]||(r[0]=l=>e(o).push({...e(g)}))},{default:x(()=>[H(" Add ")]),_:1}),Dt,e(o).length?(t(),k(C,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:r[1]||(r[1]=l=>o.value=[])},{default:x(()=>[H(" Remove All ")]),_:1})):U("",!0)])])),ee(i.$slots,"default")])}}}),Et={"h-full":"","w-full":"",flex:"~ col"},jt={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},Ot={flex:"~ gap2 items-center"},Lt={relative:"","w-full":""},Pt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},qt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Bt=d("div",{"flex-auto":""},null,-1),At=d("div",{"text-xs":"",op50:""}," Send from ",-1),Mt=d("option",{value:"app"}," App ",-1),Ft=d("option",{value:"devtools"}," DevTools ",-1),zt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Ht={"text-right":"","font-mono":""},Wt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Gt={flex:"~ gap-4"},Jt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Kt=d("div",{"w-5":"","x-divider":""},null,-1),Qt=d("div",{"flex-none":""}," Default Inputs ",-1),Yt=d("div",{"x-divider":""},null,-1),Xt={key:2},Zt={key:3,border:"b base",relative:"","n-code-block":""},eo={flex:"~ wrap","w-full":""},to=["onClick"],oo=d("div",{border:"b base","flex-auto":""},null,-1),no={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},so=d("div",null,"Response",-1),lo={key:1,"text-xs":"",op50:""},ao=d("div",{"flex-auto":""},null,-1),ro=d("div",{op50:""}," Request finished in ",-1),io={key:0,"flex-auto":"","overflow-auto":""},uo={border:"~ base","h-full":"","w-full":"",rounded:""},po=["data"],co={key:2,"flex-auto":"","overflow-auto":"",p4:""},fo={border:"~ base",rounded:""},mo=["src"],vo={key:1,controls:"",rounded:""},ho=["src"],yo=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(u,{emit:y}){const h=u,[o,$]=Qe(),g=Ye(),c=Xe(),s=pe({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),i=V(()=>s.contentType.includes("application/json")?"json":s.contentType.includes("text/html")?"html":s.contentType.includes("text/css")?"css":s.contentType.includes("text/javascript")?"javascript":s.contentType.includes("image")||s.contentType.includes("video")?"media":s.contentType.includes("text/xml")||s.contentType.includes("application/xml")?"xml":s.contentType.includes("application/pdf")?"pdf":"text"),r=V(()=>{if(i.value==="json")return JSON.stringify(s.data,null,2);if(i.value==="media"||i.value==="pdf"){const n=new Blob([s.data],{type:s.contentType});return URL.createObjectURL(n)}return s.data}),I=P(!1),M=P(!1),z=Ze(),J=V(()=>h.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),C=V(()=>J.value?.filter(n=>n.startsWith(":")||n.startsWith("**:"))||[]),l=P(h.route.method||"GET"),S=P({}),b=pe({query:[{active:!0,key:"",value:"",type:"string"}],body:[{active:!0,key:"",value:"",type:"string"}],headers:[{active:!0,key:"Content-Type",value:"application/json",type:"string"}]}),_=P({}),{inputDefaults:T,sendFrom:q}=Ue("serverRoutes"),O=V(()=>c?.value?.app?.$fetch?q.value:"devtools"),B=["GET","POST","PUT","PATCH","DELETE","HEAD"],re=["PATCH","POST","PUT","DELETE"],te=V(()=>re.includes(l.value.toUpperCase())),L=P(C.value.length?"params":"query"),Z=["input","json"],w=P(Z[0]),K=V({get:()=>b[L.value],set:n=>{b[L.value]=n}}),me=V(()=>({...G(T.value.query),...G(b.query)})),ve=V(()=>({...G(T.value.headers),...G(b.headers)})),ie=V(()=>te.value?w.value==="json"?{...G(T.value.body),..._.value}:{...G(T.value.body),...G(b.body)}:void 0),Ee=V(()=>{let n=window?.location.origin;return n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),n}),oe=V(()=>{let n=new URLSearchParams(me.value).toString();n&&(n=`?${n}`);const p=(J.value?.map(D=>(D.startsWith(":")||D.startsWith("**:"))&&S.value[D]||D).join("")||"")+n;let f=g.value?.app.baseURL||"";return(f==="./"||f===".")&&(f=""),f.endsWith("/")&&(f=f.slice(0,-1)),f+p}),he=V(()=>Ee.value+oe.value);function G(n){const p=Object.fromEntries(n.filter(({active:f,key:D,value:R})=>f&&D&&R!==void 0).map(({key:f,value:D})=>[f,D]));return Object.entries(p).length?p:void 0}async function ye(){M.value=!0,I.value=!0;const n=Date.now(),p=O.value==="app"?c.value.app.$fetch:$fetch;nt("server-routes:fetch",{method:l.value,sendFrom:O.value});try{s.data=await p(he.value,{method:l.value.toUpperCase(),headers:ve.value,query:me.value,body:ie.value,onResponse({response:f}){s.contentType=(f.headers.get("content-type")||"").toString().toLowerCase().trim(),s.statusCode=f.status,s.error=void 0},onResponseError(f){s.error=f.response._data,s.data=f.response._data}})}catch{}I.value=!1,s.fetchTime=Date.now()-n}const _e=V(()=>{const n=[],p=[],f=Object.entries(ve.value).filter(([R,F])=>R&&F&&!(R==="Content-Type"&&F==="application/json")).map(([R,F])=>`  '${R}': '${F}'`).join(`,
`);l.value.toUpperCase()!=="GET"&&p.push(`method: '${l.value.toUpperCase()}'`),f&&p.push(`headers: {
${f}
}`),ie.value&&p.push(`body: ${JSON.stringify(ie.value,null,2)}`);const D=p.length?`, {
${p.join(`,
`).split(`
`).map(R=>`  ${R}`).join(`
`)}
}`:"";return n.push({name:"useFetch",lang:"javascript",docs:ke.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${oe.value}'${D})`}),n.push({name:"$fetch",lang:"javascript",docs:ke.nuxt.$fetch,code:`await $fetch('${oe.value}'${D})`}),n}),Q=P(Oe()),W=pe({key:"",value:""}),je=V(()=>{const n=[];return C.value.length&&n.push({name:"Params",slug:"params",length:C.value.length}),n.push({name:"Query",slug:"query",length:b.query.length}),te.value&&n.push({name:"Body",slug:"body",length:b.body.length}),n.push({name:"Headers",slug:"headers",length:b.headers.length}),n.push({name:"Cookies",slug:"cookies",length:Q.value.length}),n.push({name:"Snippets",slug:"snippet"}),n});function Oe(){return document.cookie.split("; ").map(n=>{const[p,f]=n.split("=");return{key:p,value:f}}).filter(n=>n.key)}function ue(n,p){if(!n)return;const f=Q.value.find(R=>R.key===n),D=wt(n);f!==void 0?p===void 0&&(Q.value=Q.value.filter(R=>R.key!==n)):(Q.value.push({key:n,value:p}),W.key="",W.value=""),D.value=p}et(()=>{w.value==="json"&&typeof _.value=="string"&&(_.value=JSON.parse(_.value))});const Le=tt();return(n,p)=>{const f=fe,D=Re,R=$e,F=ce,ge=De,Pe=ct,qe=Ve,Be=st,de=Te,Ae=ft,Me=mt,be=Se("tooltip");return t(),v("div",Et,[d("div",jt,[d("div",Ot,[n.route.method?(t(),k(f,{key:0,class:j(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(l))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:x(()=>[H(E(e(l).toUpperCase()),1)]),_:1},8,["class"])):(t(),k(D,{key:1,modelValue:e(l),"onUpdate:modelValue":p[0]||(p[0]=a=>X(l)?l.value=a:null),class:j(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(l))])},{default:x(()=>[(t(),v(N,null,A(B,a=>d("option",{key:a,class:j(("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(a))},E(a.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),d("div",Lt,[m(R,{"model-value":e(oe),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),d("div",Pt,[le(m(f,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:p[1]||(p[1]=a=>e(Le)(e(he),"server-route-url"))},null,512),[[be,"Copy URL"]]),le(m(f,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:p[2]||(p[2]=a=>e(z)(n.route.filepath))},null,512),[[be,"Open in Editor"]])])]),m(f,{"h-full":"",n:"primary solid",onClick:ye},{default:x(()=>[m(F,{icon:"carbon:send"})]),_:1})])]),d("div",qt,[(t(!0),v(N,null,A(e(je),a=>(t(),k(f,{key:a.slug,class:j(e(L)===a.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Y=>L.value=a.slug},{default:x(()=>[m(F,{icon:("ServerRouteTabIcons"in n?n.ServerRouteTabIcons:e(Ne))[a.slug]},null,8,["icon"]),H(" "+E(a.name)+" "+E(a?.length?`(${a.length})`:"")+" ",1),d("span",null,E(e(T)[a.slug]?.length?`(${e(T)[a.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Bt,At,m(D,{modelValue:e(O),"onUpdate:modelValue":p[3]||(p[3]=a=>X(O)?O.value=a:null),class:"n-xs",disabled:!e(c)?.app?.$fetch},{default:x(()=>[Mt,Ft]),_:1},8,["modelValue","disabled"])]),e(L)==="params"?(t(),v("div",zt,[(t(!0),v(N,null,A(e(C),a=>(t(),v(N,{key:a},[d("div",Ht,E(a),1),m(R,{modelValue:e(S)[a],"onUpdate:modelValue":Y=>e(S)[a]=Y,placeholder:a,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):U("",!0),e(L)==="cookies"?(t(),v("div",Wt,[(t(!0),v(N,null,A(e(Q),a=>(t(),v("div",{key:a.key,flex:"~ gap-4 items-center"},[m(R,{placeholder:"Key...","model-value":a.key,disabled:"","op-70":""},null,8,["model-value"]),m(R,{placeholder:"Value...","model-value":a.value,"flex-1":"",n:"primary",onInput:Y=>ue(a.key,Y.target?.value)},null,8,["model-value","onInput"]),m(f,{title:"Delete",n:"red",onClick:Y=>ue(a.key,void 0)},{default:x(()=>[m(F,{icon:"i-carbon-trash-can"})]),_:2},1032,["onClick"])]))),128)),d("div",Gt,[m(R,{modelValue:e(W).key,"onUpdate:modelValue":p[4]||(p[4]=a=>e(W).key=a),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),m(R,{modelValue:e(W).value,"onUpdate:modelValue":p[5]||(p[5]=a=>e(W).value=a),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),m(f,{title:"Add",n:"primary",onClick:p[6]||(p[6]=a=>ue(e(W).key,e(W).value))},{default:x(()=>[m(F,{icon:"i-carbon-save"})]),_:1})])])):U("",!0),m(e(o),null,{default:x(()=>[m(ge,{modelValue:e(K),"onUpdate:modelValue":p[9]||(p[9]=a=>X(K)?K.value=a:null),default:{active:!0,type:"string"},"max-h-xs":"","of-auto":""},{default:x(()=>[e(T)[e(L)]?.length?(t(),v(N,{key:0},[d("div",Jt,[Kt,Qt,m(f,{icon:"i-carbon-edit",border:!1,onClick:p[7]||(p[7]=a=>y("open-default-input"))}),Yt]),m(ge,{modelValue:e(T)[e(L)],"onUpdate:modelValue":p[8]||(p[8]=a=>e(T)[e(L)]=a),disabled:"",p0:""},null,8,["modelValue"])],64)):U("",!0)]),_:1},8,["modelValue"])]),_:1}),e(L)==="snippet"?(t(),v("div",Xt,[e(_e).length?(t(),k(Pe,{key:0,"code-snippets":e(_e)},null,8,["code-snippets"])):U("",!0)])):e(K)?(t(),v("div",Zt,[e(L)==="body"?(t(),v(N,{key:0},[d("div",eo,[(t(),v(N,null,A(Z,a=>d("button",{key:a,px4:"",py2:"",border:"r base",hover:"bg-active",class:j({"border-b":a!==e(w)}),onClick:Y=>w.value=a},[d("div",{class:j({op30:a!==e(w)}),"font-mono":""},E(a),3)],10,to)),64)),oo]),e(w)==="input"?(t(),k(e($),{key:0})):e(w)==="json"?(t(),k(e(vt),ot({key:1,modelValue:e(_),"onUpdate:modelValue":p[10]||(p[10]=a=>X(_)?_.value=a:null),class:[[n.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},n.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):U("",!0)],64)):(t(),k(e($),{key:1}))])):U("",!0),e(M)?e(I)?(t(),k(Be,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:x(()=>[H(" Fetching... ")]),_:1})):(t(),v(N,{key:6},[d("div",no,[so,e(s).error?(t(),k(de,{key:0,n:"red"},{default:x(()=>[H(" Error ")]),_:1})):U("",!0),m(de,{n:e(s).error?"orange":"green",textContent:E(e(s).statusCode)},null,8,["n","textContent"]),e(s).contentType?(t(),v("code",lo,E(e(s).contentType),1)):U("",!0),e(s).contentType==="application/json"?(t(),k(Ae,{key:2,getter:()=>({input:e(r)})},null,8,["getter"])):U("",!0),ao,ro,m(de,{n:"green"},{default:x(()=>[H(E(e(s).fetchTime)+" ms ",1)]),_:1})]),e(i)==="pdf"?(t(),v("div",io,[d("div",uo,[d("object",{data:e(r),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,po)])])):e(i)!=="media"?(t(),k(Me,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(r),lang:e(i)},null,8,["code","lang"])):(t(),v("div",co,[d("div",fo,[e(s).contentType.includes("image")?(t(),v("img",{key:0,rounded:"",src:e(r)},null,8,mo)):(t(),v("video",vo,[d("source",{src:e(r),type:"video/mp4"},null,8,ho)]))])]))],64)):(t(),k(qe,{key:4},{default:x(()=>[m(f,{n:"primary",onClick:ye},{default:x(()=>[m(F,{icon:"carbon:send"}),H(" Send request ")]),_:1})]),_:1}))])}}}),_o={flex:"~ gap1","text-sm":""},go={key:0,op50:""},bo={op50:""},ko=d("span",{op75:""},"Select a route to start",-1),Co=d("div",{p4:"",border:"b base"},[d("span",{"text-lg":""},"Default Inputs"),d("br"),d("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Lo=ae({__name:"server-routes",setup(u){const y=P(!1),h=lt(),o=we(),{selectedRoute:$,view:g,inputDefaults:c}=Ue("serverRoutes"),s=V(()=>{!o.value&&$.value&&(o.value=$.value.filepath);const C=h.value?.find(l=>l.filepath===o.value);return o.value!==$.value?.filepath&&C&&($.value=C),C}),i=P(""),r=V(()=>new at(h.value||[],{keys:["method","route"],shouldSort:!0})),I=V(()=>h.value?i.value?r.value.search(i.value).map(l=>l.item):h.value:[]),M=V(()=>{const C=[],l=(S,b)=>{S.routes=S.routes||[],S.routes.push(b)};return I.value.forEach(S=>{const b=S.filepath.split("/"),_=b.slice(b.indexOf("server")+1);_.length>0&&_[_.length-1].includes(".")&&_.pop();let T=null;if(_.forEach(q=>{const O=T?T.routes?.find(B=>B.route===q):C.find(B=>B.route===q);if(O)T=O;else{const B={route:q,filepath:q.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};T?l(T,B):C.push(B),T=B}}),S.type==="runtime"){const q=C.find(O=>O.route==="runtime");if(q)l(q,S);else{const O={route:"runtime",filepath:"runtime",type:"collection",routes:[S]};C.push(O)}}else T?l(T,S):C.push(S)}),C});function z(){g.value=g.value==="tree"?"list":"tree"}function J(C){return C.charAt(0).toUpperCase()+C.slice(1)}return(C,l)=>{const S=fe,b=dt,_=Ie,T=yo,q=ut,O=Ve,B=rt,re=De,te=ht,L=yt,Z=Se("tooltip");return t(),v(N,null,[m(B,{"storage-key":"tab-server-routes"},{left:x(()=>[m(b,{search:e(i),"onUpdate:search":l[1]||(l[1]=w=>X(i)?i.value=w:null),pb2:""},{actions:x(()=>[le(m(S,{"text-lg":"",icon:e(g)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:z},null,8,["icon"]),[[Z,"Toggle View"]]),le(m(S,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:l[0]||(l[0]=w=>y.value=!e(y))},null,512),[[Z,"Default Inputs"]])]),default:x(()=>[d("div",_o,[e(i)?(t(),v("span",go,E(e(I).length)+" matched · ",1)):U("",!0),d("span",bo,E(e(h)?.length)+" routes in total",1)])]),_:1},8,["search"]),(t(!0),v(N,null,A(e(g)==="tree"?e(M):e(I),w=>(t(),k(_,{key:w.filepath,item:w},null,8,["item"]))),128))]),right:x(()=>[(t(),k(it,{max:10},[e(s)?(t(),k(T,{key:e(s).filepath,route:e(s),onOpenDefaultInput:l[2]||(l[2]=w=>y.value=!0)},null,8,["route"])):U("",!0)],1024)),e(s)?U("",!0):(t(),k(O,{key:0},{default:x(()=>[m(q,{px6:"",py2:""},{default:x(()=>[ko]),_:1})]),_:1}))]),_:1}),m(L,{modelValue:e(y),"onUpdate:modelValue":l[3]||(l[3]=w=>X(y)?y.value=w:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:l[4]||(l[4]=w=>y.value=!1)},{default:x(()=>[d("div",null,[Co,(t(!0),v(N,null,A(Object.keys(e(c)),w=>(t(),k(te,{key:w,text:`${J(w)} ${e(c)[w].length?`(${e(c)[w].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in C?C.ServerRouteTabIcons:e(Ne))[w]},{default:x(()=>[m(re,{modelValue:e(c)[w],"onUpdate:modelValue":K=>e(c)[w]=K,py0:"",default:{active:!0,type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Lo as default};
